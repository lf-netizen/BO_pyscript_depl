<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Gantt charts generator</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="utf-8">
    <script defer type="text/javascript" src="load.js"></script>
    <py-env>
        - matplotlib
        - pandas
        - paths:
          - ./src.py
    </py-env>


</head>
<body>
    
    <div style="position: fixed; left: 0; top: 0; height: 100%; width: 700px; text-align: center; border-right: 0.3mm solid; z-index: 1; background: #fff;">
        <iframe frameBorder="0" id="list_iframe" width="100%" height=90% allign="center" style="margin-bottom: 25px;" src=task_list/index.html></iframe>
        <py-button id="random_input" label="Random input">
            import js
            def on_click(evt):
                js.document.getElementById("list_iframe").contentWindow.deleteAllTasks()
                for _ in range(2):
                    js.document.getElementById("list_iframe").contentWindow.addRandomTasks()
                js.document.getElementById("graph_iframe").contentWindow.springy.layout.randomEdges()
        </py-button>
        <py-button id="new-btn" label="Calculate">
            import src
            import js
            def on_click(evt):
                input_data = src.read_data()
                if input_data is None:
                    Element('plot').write('Error: graph has cycle(s)')
                    js.document.getElementById("plot").style.height = '10%';
                    return
                Element('plot').write(src.solve(input_data), append=False)
                # js.document.getElementById("plot").scrollIntoView();
                js.document.getElementById("plot").style.height = '110%';
        </py-button>
        <py-button id="autolayout" label="Graph autolayout">
            import js
            def on_click(evt):
                js.document.getElementById("graph_iframe").contentWindow.springy.layout.autolayout_springy()
        </py-button>
    </div>

    <div style="position: absolute; left: 700px; height: 90%; width: calc(100% - 700px); text-align: center;">
        <h2>Relationship graph</h2>
        <iframe id="graph_iframe" width="90%" height=70% allign="center" src=springy/index.html style="margin-bottom: 20px; border-color: #888888; border-style: solid; border-width: 1px; border-right-width: 1.5px;"></iframe>
        <div id="plot" style="text-align: center; height: 0%;"></div>
    </div>
    
</body>
</html>